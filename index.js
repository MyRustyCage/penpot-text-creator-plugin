(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(n){if(n.ep)return;n.ep=!0;const e=t(n);fetch(n.href,e)}})();const u=document.getElementById("textInput"),l=document.getElementById("createBtn"),d=document.getElementById("debugPanel"),f=document.getElementById("debugContent");let a=!1;function i(o,t="info"){const s=`[${new Date().toLocaleTimeString()}] [${t.toUpperCase()}] ${o}`;d.style.display="block",d.className=`debug-panel ${t}`,f.textContent=s,console.log(s)}i("UI loaded, waiting for plugin connection...","info");setTimeout(()=>{a||i("WARNING: Plugin not responding. Check manifest.json permissions and plugin.ts compilation.","warning")},3e3);l.addEventListener("click",()=>{const o=u.value.trim();if(!o){i("ERROR: Text field is empty. Please enter some text.","error");return}a||i("WARNING: Plugin may not be ready. Attempting to send anyway...","warning"),i(`Sending text (${o.length} chars): "${o.substring(0,14)}..."`,"info"),parent.postMessage({type:"create-text",content:o},"*"),l.disabled=!0,setTimeout(()=>{l.disabled=!1},1500)});window.addEventListener("message",o=>{console.log("[UI] Raw message received:",o.data);let t=o.data;if(t&&t.content&&typeof t.content=="object"&&(t=t.content),console.log("[UI] Parsed message:",t),!t||!t.type){console.warn("[UI] Message has no type:",t);return}if(t.type==="plugin-ready"){a=!0,i("âœ“ Plugin connected and ready!","success");return}if(t.type==="success")i(`SUCCESS: ${t.message}`,"success"),u.value="";else if(t.type==="error"){const s=`ERROR: ${t.message}

Type: ${t.name||"Unknown"}

Stack trace:
${t.stack||"No stack trace"}`;i(s,"error")}});console.log("[UI] Event listeners registered");
